<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø°ÙŠØ¹ - NABD Live Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://download.agora.io/sdk/release/AgoraRTC_N-4.18.2.js"></script>

    <style>
        :root { --primary: #F72585; --gold: #FFD700; }
        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; }
        body { background: #000; color: #fff; margin: 0; overflow: hidden; height: 100vh; }

        #local-player { position: absolute; inset: 0; z-index: 1; }
        #local-player video { object-fit: cover !important; transform: rotateY(180deg); }

        /* Ø·Ø¨Ù‚Ø© Ø§Ù„Ù‚Ù„ÙˆØ¨ Ø§Ù„Ù…ØªØ·Ø§ÙŠØ±Ø© */
        .hearts-container { position: absolute; inset: 0; pointer-events: none; overflow: hidden; z-index: 5; }
        .floating-heart {
            position: absolute; bottom: 100px; 
            font-size: 28px; animation: floatUp 2.5s ease-in forwards;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5));
        }

        .ui-layer { 
            position: absolute; inset: 0; z-index: 10; padding: 15px; 
            display: flex; flex-direction: column; justify-content: space-between; 
            pointer-events: none;
            background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, transparent 20%, rgba(0,0,0,0.8) 100%);
        }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª --- */
        .top-bar { display: flex; justify-content: space-between; align-items: flex-start; gap: 10px; }
        
        .host-pill {
            background: rgba(0,0,0,0.5); padding: 4px 12px 4px 4px; border-radius: 30px;
            display: flex; align-items: center; gap: 8px; border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(5px); pointer-events: auto;
        }
        .host-img { width: 32px; height: 32px; border-radius: 50%; border: 1px solid var(--primary); }
        .host-info { display: flex; flex-direction: column; line-height: 1.1; }
        .host-name { font-size: 12px; font-weight: bold; color: #fff; }
        
        /* Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© ÙˆØ§Ù„Ù‚Ù„ÙˆØ¨ */
        .counters-group { display: flex; gap: 5px; }
        .status-badge { 
            background: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 20px; 
            font-size: 12px; display: flex; align-items: center; gap: 6px; 
            backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.1);
            font-weight: bold; min-width: 60px; justify-content: center;
        }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙŠÙƒØ± (Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§) --- */
        .gift-ticker-wrapper {
            position: absolute; top: 80px; left: 10px; z-index: 20; pointer-events: none;
            display: flex; flex-direction: column; gap: 8px; width: 70%;
        }
        .gift-ticker-card {
            display: flex; align-items: center; gap: 8px;
            background: linear-gradient(90deg, rgba(0,0,0,0.8) 0%, rgba(247,37,133,0.2) 100%);
            border-left: 3px solid var(--gold); border-radius: 50px;
            padding: 4px 15px 4px 4px;
            transform: translateX(-120%); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .gift-ticker-card.show { transform: translateX(0); }
        .t-avatar { width: 30px; height: 30px; border-radius: 50%; border: 1px solid var(--gold); }
        .t-text { font-size: 11px; color: #fff; line-height: 1.2; }
        .t-name { color: var(--gold); font-weight: 800; }
        .t-combo { font-family: 'Impact', sans-serif; font-size: 22px; color: #fff; text-shadow: 2px 2px 0 var(--primary); margin-right: auto; }
        .t-combo.pop { animation: pop 0.2s ease-in-out; }

        /* --- Ø§Ù„Ø´Ø§Øª ÙˆØ§Ù„ØªØ­ÙƒÙ… --- */
        .bottom-section { display: flex; flex-direction: column; gap: 10px; width: 100%; }
        
        .chat-area {
            height: 200px; overflow-y: auto; scrollbar-width: none;
            mask-image: linear-gradient(to top, black 85%, transparent 100%);
            display: flex; flex-direction: column; justify-content: flex-end;
            pointer-events: auto; padding-bottom: 10px;
        }
        
        .chat-msg {
            background: rgba(0,0,0,0.4); padding: 4px 10px; border-radius: 12px;
            margin-bottom: 6px; font-size: 13px; width: fit-content; max-width: 85%;
            animation: slideIn 0.2s ease; text-shadow: 0 1px 2px #000;
        }
        .chat-user { color: #4CC9F0; font-weight: bold; margin-left: 5px; }
        .gift-msg { background: linear-gradient(90deg, rgba(255,215,0,0.2), transparent); border-right: 2px solid var(--gold); color: var(--gold); }
        .join-msg { background: rgba(52, 199, 89, 0.2); color: #fff; font-size: 11px; padding: 2px 8px; border-radius: 10px; width: fit-content; }

        .controls-bar {
            display: flex; align-items: center; gap: 10px; pointer-events: auto;
        }
        .chat-input {
            flex: 1; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px; padding: 10px 15px; color: #fff; outline: none;
        }
        .btn-control {
            width: 40px; height: 40px; border-radius: 50%; border: none;
            background: rgba(255,255,255,0.15); color: #fff; font-size: 18px;
            display: grid; place-items: center; cursor: pointer; backdrop-filter: blur(5px);
        }
        .btn-control.red { background: #ff3b30; }
        .btn-control.gold { background: rgba(255,215,0,0.2); color: var(--gold); border: 1px solid var(--gold); }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        #loading-screen { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        
        /* Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØ¨ÙŠØ± */
        .big-effect { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 100px; animation: zoomFade 1.5s forwards; z-index: 50; text-shadow: 0 0 30px rgba(255,215,0,0.8); }

        @keyframes floatUp { 0% { transform: translateY(0) scale(0.8); opacity: 1; } 100% { transform: translateY(-250px) scale(1.5) rotate(20deg); opacity: 0; } }
        @keyframes pop { 50% { transform: scale(1.5); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } }
        @keyframes zoomFade { 0% { transform: translate(-50%, -50%) scale(0); opacity: 0; } 50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); } 100% { opacity: 0; transform: translate(-50%, -50%) scale(1.5); } }
    </style>
</head>
<body>

    <div id="loading-screen">
        <i class="fa-solid fa-satellite-dish fa-spin" style="font-size: 40px; color: #F72585; margin-bottom: 20px;"></i>
        <div style="font-weight: bold;">Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨Ø«...</div>
    </div>

    <div id="local-player"></div>
    <div id="hearts-container" class="hearts-container"></div>
    <div id="big-effects-area" style="position:absolute; inset:0; pointer-events:none; z-index:40;"></div>

    <div class="ui-layer">
        <div class="top-bar">
            <div class="host-pill">
                <img id="host-pic" src="https://via.placeholder.com/50" class="host-img">
                <div class="host-info">
                    <span id="host-name" class="host-name">..</span>
                    <span style="font-size:9px; color:#ccc;">Ø§Ù„Ù…Ø°ÙŠØ¹</span>
                </div>
            </div>
            
            <div class="counters-group">
                <div class="status-badge" style="background: rgba(255, 45, 85, 0.3); border-color: rgba(255, 45, 85, 0.5);">
                    <span id="total-hearts">0</span> <i class="fa-solid fa-heart" style="color: #ff2d55;"></i>
                </div>
                <div class="status-badge">
                    <span id="viewer-count">0</span> <i class="fa-solid fa-eye"></i>
                </div>
            </div>
        </div>

        <div id="gift-ticker" class="gift-ticker-wrapper"></div>

        <div class="bottom-section">
            <div id="chat-list" class="chat-area"></div>
            
            <div class="controls-bar">
                <input type="text" id="chat-input" class="chat-input" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ø§Ù‹..." onkeypress="if(event.key==='Enter') sendMsg()">
                
                <button class="btn-control gold" onclick="playSfx('thankyou')"><i class="fa-solid fa-microphone-lines"></i></button>
                <button class="btn-control" onclick="toggleCam()"><i class="fa-solid fa-video"></i></button>
                <button class="btn-control" onclick="toggleMic()"><i class="fa-solid fa-microphone"></i></button>
                <button class="btn-control red" onclick="endStream()"><i class="fa-solid fa-power-off"></i></button>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDpvqNAReChsHn5tFJSp7vV_EJHmtD2x4c",
            authDomain: "pools-e4381.firebaseapp.com",
            projectId: "pools-e4381",
            storageBucket: "pools-e4381.firebasestorage.app",
            messagingSenderId: "339799216046",
            appId: "1:339799216046:web:26e437a7b7d5c24fe9023f"
        };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        const APP_ID = "f311de5105eb4fa7869dfffd2bb7ac2d";
        const TOKEN = "007eJxTYGhhPet5ZLbkOikhVcfvlz9rM9ouv5yyO1hfY/fRZY/S8lkUGNKMDQ1TUk0NDUxTk0zSEs0tzCxT0tLSUoySkswTk41SOlubMhsCGRnSrBuZGRkgEMTnYShJLS6JT85IzMtLzWFgAAAh4iJc"; 
        const CHANNEL = "test_channel"; 

        const client = AgoraRTC.createClient({ mode: "live", codec: "vp8" });
        let localTracks = { audio: null, video: null };
        let currentUser = null;
        let userData = {};
        
        // ğŸ”¥ Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªÙƒØ±Ø§Ø±: ØªØ®Ø²ÙŠÙ† Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙŠ ØªÙ…Øª Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡Ø§
        const processedMsgIds = new Set();

        auth.onAuthStateChanged(async user => {
            if(user) {
                currentUser = user;
                const doc = await db.collection('users').doc(user.uid).get();
                userData = doc.exists ? doc.data() : { name: "Ù…Ø°ÙŠØ¹", profilePic: "" };
                initStream();
            } else {
                alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");
                window.location.href = 'home.html';
            }
        });

        async function initStream() {
            try {
                // Agora
                client.setClientRole("host");
                await client.join(APP_ID, CHANNEL, TOKEN, null);
                [localTracks.audio, localTracks.video] = await AgoraRTC.createMicrophoneAndCameraTracks();
                localTracks.video.play("local-player");
                await client.publish(Object.values(localTracks));

                // Create/Update Live Doc
                await db.collection('lives').doc(CHANNEL).set({
                    hostUid: currentUser.uid,
                    hostName: userData.name,
                    hostPic: userData.profilePic,
                    status: 'online',
                    viewers: 0,
                    hearts: 0, // ğŸ”¥ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯
                    startedAt: firebase.firestore.FieldValue.serverTimestamp()
                }, { merge: true });

                // UI Setup
                document.getElementById('host-name').innerText = userData.name;
                document.getElementById('host-pic').src = userData.profilePic || "https://via.placeholder.com/50";
                document.getElementById('loading-screen').style.display = 'none';

                // Listeners
                listenToLiveStats();
                listenToChat();

            } catch (e) {
                console.error(e);
                alert("Ø®Ø·Ø£: " + e.message);
            }
        }

        // --- 1. Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª (Ù‚Ù„ÙˆØ¨ + Ù…Ø´Ø§Ù‡Ø¯ÙŠÙ†) ---
        function listenToLiveStats() {
            db.collection('lives').doc(CHANNEL).onSnapshot(doc => {
                if (doc.exists) {
                    const data = doc.data();
                    document.getElementById('viewer-count').innerText = data.viewers || 0;
                    document.getElementById('total-hearts').innerText = data.hearts || 0; // ğŸ”¥ ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ù„ÙˆØ¨
                }
            });
        }

        // --- 2. Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø´Ø§Øª ÙˆÙ…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø± ---
        function listenToChat() {
            const list = document.getElementById('chat-list');
            
            // Ø¨Ù†Ø¬ÙŠØ¨ Ø¨Ø³ Ø¢Ø®Ø± 50 Ø±Ø³Ø§Ù„Ø© Ø¹Ø´Ø§Ù† Ø§Ù„Ø£Ø¯Ø§Ø¡ØŒ ÙˆØ¨Ù†Ø±ØªØ¨Ù‡Ù… Ø¨Ø§Ù„ÙˆÙ‚Øª
            db.collection('lives').doc(CHANNEL).collection('messages')
                .orderBy('timestamp', 'asc')
                .limitToLast(50) 
                .onSnapshot(snapshot => {
                    snapshot.docChanges().forEach(change => {
                        // ğŸ”¥ Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ø³Ø­Ø±ÙŠ: Ù„Ùˆ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¯ÙŠ Ø§ØªØ¹Ø§Ù„Ø¬Øª Ù‚Ø¨Ù„ ÙƒØ¯Ù‡ØŒ ØªØ¬Ø§Ù‡Ù„Ù‡Ø§ ÙÙˆØ±Ø§Ù‹
                        if (change.type === 'added') {
                            const msgId = change.doc.id;
                            if (processedMsgIds.has(msgId)) return; // Ø®Ø±ÙˆØ¬
                            processedMsgIds.add(msgId); // Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©

                            const msg = change.doc.data();
                            processMessage(msg); // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                        }
                    });
                });
        }

        function processMessage(msg) {
            const list = document.getElementById('chat-list');
            const div = document.createElement('div');

            // 1. Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… (Ø¬Ø¯ÙŠØ¯)
            if (msg.type === 'join') {
                div.className = 'chat-msg join-msg';
                div.innerHTML = `ğŸš€ <b>${escapeHtml(msg.userName)}</b> Ø§Ù†Ø¶Ù… Ù„Ù„Ø¨Ø«`;
            }
            // 2. Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§
            else if (msg.type === 'gift') {
                div.className = 'chat-msg gift-msg';
                div.innerHTML = `<span class="chat-user">${escapeHtml(msg.userName)}</span> Ø£Ø±Ø³Ù„ ${msg.giftName} ${msg.giftEmoji}`;
                
                // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙŠÙƒØ± (Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ)
                GiftTicker.add(msg.userName, msg.userPic, msg.giftName, msg.giftEmoji);
                
                // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØ¨ÙŠØ±
                showBigEffect(msg.giftEmoji);
                
                // ØµÙˆØª
                playTone('gift');
            }
            // 3. Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø§Ø¯ÙŠØ©
            else {
                div.className = 'chat-msg';
                div.innerHTML = `<span class="chat-user">${escapeHtml(msg.userName)}:</span> ${escapeHtml(msg.text)}`;
            }

            list.appendChild(div);
            list.scrollTop = list.scrollHeight;
        }

        async function sendMsg() {
            const input = document.getElementById('chat-input');
            const text = input.value.trim();
            if (!text) return;

            await db.collection('lives').doc(CHANNEL).collection('messages').add({
                type: 'text',
                userId: currentUser.uid,
                userName: userData.name,
                text: text,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            });
            input.value = '';
        }

        // --- 3. Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙŠÙƒØ± ÙˆØ§Ù„ÙƒÙˆÙ…Ø¨Ùˆ (Ticker System) ---
        const GiftTicker = {
            activeData: null,
            timer: null,

            add: function(name, pic, giftName, emoji) {
                // Ù„Ùˆ Ù†ÙØ³ Ø§Ù„Ø´Ø®Øµ ÙˆÙ†ÙØ³ Ø§Ù„Ù‡Ø¯ÙŠØ© Ø´ØºØ§Ù„Ø©ØŒ Ø²ÙˆØ¯ Ø§Ù„ÙƒÙˆÙ…Ø¨Ùˆ
                if (this.activeData && this.activeData.name === name && this.activeData.gift === giftName) {
                    this.activeData.count++;
                    this.updateUI();
                } else {
                    // Ù‡Ø¯ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
                    this.activeData = { name, pic, gift: giftName, emoji, count: 1 };
                    this.renderUI();
                }
                this.resetTimer();
            },

            renderUI: function() {
                const container = document.getElementById('gift-ticker');
                container.innerHTML = `
                    <div class="gift-ticker-card" id="ticker-card">
                        <img src="${this.activeData.pic || 'https://via.placeholder.com/50'}" class="t-avatar">
                        <div class="ticker-info">
                            <span class="t-name">${this.activeData.name}</span>
                            <span class="t-text">Ø£Ø±Ø³Ù„ ${this.activeData.gift}</span>
                        </div>
                        <div style="font-size:25px;">${this.activeData.emoji}</div>
                        <div class="t-combo" id="ticker-combo">x1</div>
                    </div>
                `;
                setTimeout(() => document.getElementById('ticker-card').classList.add('show'), 10);
            },

            updateUI: function() {
                const comboEl = document.getElementById('ticker-combo');
                if (comboEl) {
                    comboEl.innerText = `x${this.activeData.count}`;
                    comboEl.classList.remove('pop');
                    void comboEl.offsetWidth; // Reset animation
                    comboEl.classList.add('pop');
                    playTone('combo');
                }
            },

            resetTimer: function() {
                if (this.timer) clearTimeout(this.timer);
                this.timer = setTimeout(() => {
                    const card = document.getElementById('ticker-card');
                    if(card) {
                        card.style.transform = "translateX(-120%)";
                        setTimeout(() => { 
                            document.getElementById('gift-ticker').innerHTML = ''; 
                            this.activeData = null;
                        }, 300);
                    }
                }, 3000);
            }
        };

        // --- 4. ØªØ£Ø«ÙŠØ±Ø§Øª Ø¨ØµØ±ÙŠØ© ÙˆØµÙˆØªÙŠØ© ---
        function showBigEffect(emoji) {
            const area = document.getElementById('big-effects-area');
            const el = document.createElement('div');
            el.className = 'big-effect';
            el.innerText = emoji;
            area.appendChild(el);
            setTimeout(() => el.remove(), 1500);
        }

        // Ù…Ø­Ø±Ùƒ Ø£ØµÙˆØ§Øª Ø¨Ø³ÙŠØ· (Ø¨Ø¯ÙˆÙ† Ù…Ù„ÙØ§Øª)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playTone(type) {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);

            if (type === 'gift') {
                osc.frequency.setValueAtTime(600, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start(); osc.stop(audioCtx.currentTime + 0.5);
            } else if (type === 'combo') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(800, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
                osc.start(); osc.stop(audioCtx.currentTime + 0.2);
            }
        }

        function escapeHtml(text) {
            return text ? text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") : "";
        }

        // --- Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… ---
        async function endStream() {
            if(!confirm("Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨Ø«ØŸ")) return;
            await db.collection('lives').doc(CHANNEL).update({ status: 'offline' });
            await client.leave();
            window.location.href = 'home.html';
        }

        let isCam = true, isMic = true;
        async function toggleMic() {
            isMic = !isMic;
            await localTracks.audio.setMuted(!isMic);
        }
        async function toggleCam() {
            isCam = !isCam;
            await localTracks.video.setMuted(!isCam);
        }

        // ØªÙ†Ø¸ÙŠÙ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬
        window.onbeforeunload = () => {
            db.collection('lives').doc(CHANNEL).update({ status: 'offline' });
        };

    </script>
</body>
</html>
